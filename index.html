<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Form Pembayaran Infaq</title>

    <style>
        /* ===============================
           RESET & BASE
        ================================ */
        * {
          box-sizing: border-box;
          font-family: -apple-system, BlinkMacSystemFont,
                       "SF Pro Text", "SF Pro Display",
                       "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        }
        
        body {
          margin: 0;
          min-height: 100vh;
          background: #f2f2f7;
          display: flex;
          justify-content: center;
          align-items: center;
          color: #1c1c1e;
        }
        
        /* ===============================
           FORM CONTAINER
        ================================ */
        .form-container {
          width: 100%;
          max-width: 420px;
          background: #ffffff;
          border-radius: 24px;
          padding: 28px 24px;
          box-shadow:
            0 20px 40px rgba(0,0,0,0.08),
            0 1px 2px rgba(0,0,0,0.06);
        }
        
        /* ===============================
           TITLE
        ================================ */
        .form-container h2 {
          margin: 0 0 24px;
          text-align: center;
          font-size: 22px;
          font-weight: 600;
          line-height: 1.4;
        }
        
        /* ===============================
           LABEL
        ================================ */
        label {
          display: block;
          text-align: center;
          font-size: 14px;
          font-weight: 500;
          margin-bottom: 6px;
        }
        
        /* ===============================
           HELPER TEXT (DESKRIPSI)
        ================================ */
        .helper-text {
          text-align: center;
          font-size: 12.5px;
          color: #8e8e93;
          margin-bottom: 8px;
        }
        
        /* ===============================
           INPUT FIELD
        ================================ */
        input {
          width: 100%;
          height: 46px;
          padding: 0 14px;
          margin-bottom: 16px;
          border-radius: 12px;
          border: 1px solid #d1d1d6;
          background: #f9f9fb;
          font-size: 15px;
          text-align: center;
          transition: all 0.2s ease;
        }
        
        input:focus {
          outline: none;
          border-color: #0a84ff;
          background: #ffffff;
          box-shadow: 0 0 0 4px rgba(10,132,255,0.15);
        }
        
        /* Disabled field */
        input:disabled {
          background: #f2f2f7;
          color: #636366;
          cursor: not-allowed;
        }
        
        /* ===============================
           BUTTON
        ================================ */
        button {
          width: 100%;
          height: 48px;
          border-radius: 14px;
          border: none;
          font-size: 15px;
          font-weight: 600;
          cursor: pointer;
          transition: all 0.2s ease;
        }
        
        /* Reset button */
        .btn-reset {
          background: #8e8e93;
          color: #ffffff;
          margin-bottom: 12px;
        }
        
        .btn-reset:hover {
          background: #6e6e73;
        }
        
        /* Primary button */
        .btn-primary {
          background: linear-gradient(180deg, #0a84ff, #006be6);
          color: #ffffff;
        }
        
        .btn-primary:hover {
          filter: brightness(1.05);
        }
        
        /* Button active effect */
        button:active {
          transform: scale(0.98);
        }

    </style>
</head>
    
<body>
    <div class="form-wrapper">

        <h1 class="title">
            Form Konfirmasi Infaq<br>
            NDA Reguler Batch 12
        </h1>
    
        <!-- Nama Member -->
        <label for="namaMember" class="label">
            Nama Member
        </label>
    
        <p class="hint">
            Silakan ketik nama Anda, lalu pilih dari daftar yang muncul.
        </p>
    
        <div class="input-wrapper">
            <input
                id="namaMember"
                type="text"
                class="input-apple"
                autocomplete="off"
                placeholder="Contoh: Fulan Fulanah"
            >
            <div id="searchResult"></div>
        </div>
    
        <label class="label">Nomor WhatsApp</label>
        <input id="nomorWA" class="input-apple" type="text" readonly>
    
        <label class="label">Jenis Kelamin</label>
        <input id="jenisKelamin" class="input-apple" type="text" readonly>
    
        <label class="label">Nomor Kelas</label>
        <input id="nomorKelas" class="input-apple" type="text" readonly>
    
        <label class="label">Nama Mentor</label>
        <input id="namaMentor" class="input-apple" type="text" readonly>
    
        <button id="resetBtn" class="btn-apple secondary">
            Reset Pilihan
        </button>
    
        <button id="submitBtn" class="btn-apple primary">
            Lanjut Isi di Google Form
        </button>
    
    </div>

    <script>
        // ==================== LOAD DATA GOOGLE SHEETS ====================
        const sheetURL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vRJsoLmoRr2EWDG7b-vUI0DwEqtWb2RIlJgFY_oG0auz0KUd2P47g95dM3eyKn5Y1XMTfpiNlT3072j/pub?gid=0&single=true&output=tsv";

        let dataSantri = [];

        fetch(sheetURL)
            .then(res => res.text())
            .then(txt => {
                const rows = txt.split("\n").map(r => r.split("\t"));
                rows.shift(); // hapus header

                dataSantri = rows.map(r => ({
                    nama: r[0]?.trim(),
                    wa: r[1]?.trim(),
                    jk: r[2]?.trim(),
                    kelas: r[3]?.trim(),
                    mentor: r[4]?.trim()
                }));
            });

        // ==================== SEARCH ====================
        const inputNama = document.getElementById("namaMember");
        const searchResult = document.getElementById("searchResult");

        inputNama.addEventListener("input", function () {
            const keyword = this.value.toLowerCase();
            searchResult.innerHTML = "";

            if (keyword.length < 1) return;

            const filtered = dataSantri.filter(s =>
                s.nama.toLowerCase().includes(keyword)
            );

            filtered.forEach(s => {
                const div = document.createElement("div");
                div.textContent = s.nama;

                div.onclick = () => {
                    inputNama.value = s.nama;
                    fillForm(s);
                    searchResult.innerHTML = "";
                };

                searchResult.appendChild(div);
            });
        });

        // ==================== ISI FORM ====================
        function fillForm(s) {
            document.getElementById("nomorWA").value = s.wa;
            document.getElementById("jenisKelamin").value = s.jk;
            document.getElementById("nomorKelas").value = s.kelas;
            document.getElementById("namaMentor").value = s.mentor;
        }

        // ==================== RESET ====================
        document.getElementById("resetBtn").addEventListener("click", function () {
            document.getElementById("namaMember").value = "";
            document.getElementById("nomorWA").value = "";
            document.getElementById("jenisKelamin").value = "";
            document.getElementById("nomorKelas").value = "";
            document.getElementById("namaMentor").value = "";
            searchResult.innerHTML = "";
        });

        // ==================== SUBMIT KE GOOGLE FORM ====================
        document.getElementById("submitBtn").addEventListener("click", function () {

            const nama   = encodeURIComponent(document.getElementById("namaMember").value);
            const wa     = encodeURIComponent(document.getElementById("nomorWA").value);
            const jk     = encodeURIComponent(document.getElementById("jenisKelamin").value);
            const kelas  = encodeURIComponent(document.getElementById("nomorKelas").value);
            const mentor = encodeURIComponent(document.getElementById("namaMentor").value);
    
            const url =
                "https://docs.google.com/forms/d/e/1FAIpQLSeA_zpQr5so4kruEVDoIn1tA3mC1weH2kIgQLbW8xdg0kg68A/viewform" +
                "?usp=pp_url" +
                "&entry.782238250=" + nama +
                "&entry.1003227427=" + wa +
                "&entry.1363053932=" + jk +
                "&entry.1556174616=" + kelas +
                "&entry.1421539763=" + mentor;
    
            window.location.href = url;
        });

        document.getElementById("submitBtn").addEventListener("click", function () {
            if (!document.getElementById("nomorWA").value) {
                alert("Silakan pilih nama dari daftar yang muncul.");
                return;
            }
            // lanjut redirect
        });
    </script>

</body>
</html>

